var a33_0x4933=['each','getEntityById','kind','pushToPlayer','isOffset','push','length','difference','max','min','undefined','hasOwnProperty','socket','getConnection','maxPackets','Spawn','serialize2','serialize','Player\x20is\x20undefined\x20(pushToPlayer).','stack','stringify','getPlayerAround','message:\x20','players','path','isMoving','forEachAdjacentNonDiagonalPosition','forEachFutureAdjacentNonDiagonalPosition','isColliding','isMobAt','randomRangeInt','isValidPosition','pushToAdjacentGroups','group','despawn','removeEntity','getDroppedOrStolenItem','pushBroadcast','handleRespawn','Properties','isNpc','addNpc','isMob','onRespawn','isDead','droppedItem','addMob','area','onMove','tryAddingMobToChestArea','isGather','setPathingGrid','randomRange','reset','addGather','index','addToArea','onMobMoveCallback','reject','forEachAdjacentGroup','isStatic','isFromChest','include','pushToGroup','recentlyLeftGroups','getEntityAround','mapStatus','forEachMob','addPlayer\x20-\x20player\x20id:\x20','addEntity','chests','gather','PLAYER\x20ID:\x20','\x27s\x20pet','playerId','onStopPathing','Move','addNpcPlayer\x20-\x20player\x20id:\x20','items','handleEntityGroupMembership','pvpBases','houses','mob','destroy','removePlayer-called','pvpSide','weight','level','packetHandler','broadcast','deleting\x20player\x20traces..','updatePopulation','createItem','addItem','forEachEntity','forEachPet','npcPlayers','forEachPlayer','getGroupIdFromPosition','addAsIncomingToGroup','removeFromGroups','addToGroup','createChest','chestX','chestY','handleItemDespawn','forEachCharacter','party','findNeighbourPath','getShortGrid','crop','minX','minY','ignoreEntity','findPath','clearIgnoreList','error','Error\x20while\x20finding\x20the\x20path\x20to\x20','\x20for\x20','collision','getEntityAroundCount','exports','./lib/class','underscore','./utils','./chest','./mobdata','./npcdata','../shared/js/itemtypes','./house','./pvpbase','./skilldata','./gather','Class','extend','map','server','database','entities','npcplayers','mobs','equipping','npcs','pets','packets','chestAreas','groups','pathfinder','zoneGroupsReady','entityCount','initPathingGrid','initZoneGroups','width','maps','getRandomStartingPosition','isMobsOnTile','npcController','NpcOnStep','bind','addNpcPlayer','spawn','forEachGroup','info','pathinggrid\x20height:',',\x20width:','grid','pathingGrid','height','entitygrid'];(function(_0x3c23ea,_0x812725){var _0x2c0374=function(_0x25e9e0){while(--_0x25e9e0){_0x3c23ea['push'](_0x3c23ea['shift']());}};_0x2c0374(++_0x812725);}(a33_0x4933,0x7a));var a33_0x385c=function(_0x1f0c24,_0x5cdab1){_0x1f0c24=_0x1f0c24-0x0;var _0x4de36b=a33_0x4933[_0x1f0c24];return _0x4de36b;};var cls=require(a33_0x385c('0x0'));_=require(a33_0x385c('0x1'));var path=require('path');var Utils=require(a33_0x385c('0x2'));var Chest=require(a33_0x385c('0x3'));var Messages=require('./message');var Npc=require('./npc');var MobData=require(a33_0x385c('0x4'));var NpcData=require(a33_0x385c('0x5'));var ItemTypes=require(a33_0x385c('0x6'));var NpcPlayer=require('./npcplayer');var House=require(a33_0x385c('0x7'));var PvpBase=require(a33_0x385c('0x8'));var SkillData=require(a33_0x385c('0x9'));var GatherData=require('./gatherdata');var Gather=require(a33_0x385c('0xa'));var MapEntities=cls[a33_0x385c('0xb')][a33_0x385c('0xc')]({'init':function(_0xa86ec,_0x3e9425,_0xafe6bd,_0x37093c){var _0x1de65c=this;_0x1de65c['id']=_0xa86ec;_0x1de65c[a33_0x385c('0xd')]=_0xafe6bd;_0x1de65c[a33_0x385c('0xe')]=_0x3e9425;_0x1de65c[a33_0x385c('0xf')]=_0x37093c;_0x1de65c[a33_0x385c('0x10')]={};_0x1de65c['players']={};_0x1de65c[a33_0x385c('0x11')]={};_0x1de65c[a33_0x385c('0x12')]={};_0x1de65c['attackers']={};_0x1de65c['items']={};_0x1de65c[a33_0x385c('0x13')]={};_0x1de65c['hurt']={};_0x1de65c[a33_0x385c('0x14')]={};_0x1de65c[a33_0x385c('0x15')]={};_0x1de65c['chests']={};_0x1de65c['gather']={};_0x1de65c['pvpBases']={};_0x1de65c['houses']={};_0x1de65c[a33_0x385c('0x16')]={};_0x1de65c['mobAreas']=[];_0x1de65c[a33_0x385c('0x17')]=[];_0x1de65c[a33_0x385c('0x18')]={};_0x1de65c[a33_0x385c('0x19')]=null;_0x1de65c['pathingGrid']=null;_0x1de65c[a33_0x385c('0x1a')]=![];_0x1de65c['maxPackets']=0x8;_0x1de65c[a33_0x385c('0x1b')]=0x0;},'mapready':function(){var _0x1224ef=this;_0x1224ef['initPathFinder']();_0x1224ef[a33_0x385c('0x1c')]();_0x1224ef[a33_0x385c('0x1d')]();},'initPathFinder':function(){this[a33_0x385c('0x19')]=new Pathfinder(this['map'][a33_0x385c('0x1e')],this[a33_0x385c('0xd')]['height']);},'spawnNpcs':function(){var _0x304c83;if(this[a33_0x385c('0xd')]==this[a33_0x385c('0xe')][a33_0x385c('0x1f')][0x0]){for(var _0x33b25d=0x0;_0x33b25d<0x14;++_0x33b25d){}}},'_createNpc':function(_0x52fe1b){var _0x5e8fb5=this;var _0x212a97=this[a33_0x385c('0xd')][a33_0x385c('0x20')]();while(_0x5e8fb5[a33_0x385c('0x21')](_0x212a97['x'],_0x212a97['y'])){_0x212a97=this['map'][a33_0x385c('0x20')]();}var _0x1ce74d=new NpcPlayer(0xea60+ ++_0x5e8fb5['entityCount'],_0x5e8fb5[a33_0x385c('0xe')],_0x5e8fb5[a33_0x385c('0xf')],_0x212a97['x'],_0x212a97['y'],_0x52fe1b,_0x5e8fb5[a33_0x385c('0xd')],_0x5e8fb5);_0x1ce74d['onStep'](this[a33_0x385c('0xd')][a33_0x385c('0x22')][a33_0x385c('0x23')][a33_0x385c('0x24')](this['map']['npcController']));_0x5e8fb5[a33_0x385c('0x25')](_0x1ce74d);_0x5e8fb5['pushBroadcast'](_0x1ce74d[a33_0x385c('0x26')]());return _0x1ce74d;},'initZoneGroups':function(){var _0x99faf5=this;_0x99faf5[a33_0x385c('0xd')][a33_0x385c('0x27')](function(_0x1f02ff){_0x99faf5[a33_0x385c('0x18')][_0x1f02ff]={'entities':{},'players':[],'incoming':[]};});_0x99faf5['zoneGroupsReady']=!![];},'initPathingGrid':function(){var _0x16f6b7=this[a33_0x385c('0xd')],_0x44c0bb=this;log[a33_0x385c('0x28')](a33_0x385c('0x29')+_0x16f6b7['height']+a33_0x385c('0x2a')+_0x16f6b7[a33_0x385c('0x1e')]);var _0x496572=new Array(_0x16f6b7['height']);for(var _0x17f5fe=0x0;_0x17f5fe<_0x16f6b7['height'];_0x17f5fe+=0x1){_0x496572[_0x17f5fe]=new Array(_0x16f6b7[a33_0x385c('0x1e')]);for(var _0x5e12b8=0x0;_0x5e12b8<_0x16f6b7[a33_0x385c('0x1e')];_0x5e12b8+=0x1){_0x496572[_0x17f5fe][_0x5e12b8]=_0x16f6b7[a33_0x385c('0x2b')][_0x17f5fe][_0x5e12b8];}}_0x44c0bb[a33_0x385c('0x2c')]=_0x496572;var _0x496572=new Array(_0x16f6b7['height']);for(var _0x17f5fe=0x0;_0x17f5fe<_0x16f6b7[a33_0x385c('0x2d')];_0x17f5fe+=0x1){_0x496572[_0x17f5fe]=new Array(_0x16f6b7[a33_0x385c('0x1e')]);for(var _0x5e12b8=0x0;_0x5e12b8<_0x16f6b7[a33_0x385c('0x1e')];_0x5e12b8+=0x1){_0x496572[_0x17f5fe][_0x5e12b8]=_0x16f6b7[a33_0x385c('0x2b')][_0x17f5fe][_0x5e12b8];}}_0x44c0bb[a33_0x385c('0x2e')]=_0x496572;log[a33_0x385c('0x28')]('Initialized\x20the\x20pathing\x20grid\x20with\x20static\x20colliding\x20cells.');},'pushSpawnsToPlayer':function(_0x188b07,_0x29a5bb){var _0x42628e=this;_[a33_0x385c('0x2f')](_0x29a5bb,function(_0x3a9210){var _0x216151=_0x42628e[a33_0x385c('0x30')](_0x3a9210);if(_0x216151&&_0x216151[a33_0x385c('0x31')]){_0x42628e[a33_0x385c('0x32')](_0x188b07,_0x216151[a33_0x385c('0x26')]());}});},'processWho':function(_0x1c633f,_0x268f71){var _0x448ed3=this;var _0x5e323a=[];var _0x1f832f=[];_[a33_0x385c('0x2f')](_0x448ed3[a33_0x385c('0x10')],function(_0x555735){if(_0x555735&&_0x448ed3[a33_0x385c('0x33')](_0x1c633f,_0x555735,0x0))_0x1f832f[a33_0x385c('0x34')](_0x555735['id']);else if(_0x555735&&_0x448ed3[a33_0x385c('0x33')](_0x1c633f,_0x555735,0xa))_0x5e323a[a33_0x385c('0x34')](_0x555735['id']);});var _0x410202=_0x268f71&&_0x268f71[a33_0x385c('0x35')]>0x0?_['difference'](_0x1f832f,_0x268f71):_0x1f832f;var _0x929f2e=_0x268f71&&_0x268f71[a33_0x385c('0x35')]>0x0?_[a33_0x385c('0x36')](_0x5e323a,_0x268f71):_0x5e323a;_[a33_0x385c('0x2f')](_0x410202,function(_0x244a06){var _0x4f82b8=_0x448ed3['getEntityById'](_0x244a06);if(_0x4f82b8&&!(_0x4f82b8==_0x1c633f)){_0x448ed3['pushToPlayer'](_0x1c633f,_0x4f82b8[a33_0x385c('0x26')]());}});_[a33_0x385c('0x2f')](_0x929f2e,function(_0x3b45a8){var _0x565625=_0x448ed3[a33_0x385c('0x30')](_0x3b45a8);if(_0x565625&&!(_0x565625==_0x1c633f)){_0x448ed3[a33_0x385c('0x32')](_0x1c633f,_0x565625['spawn']());}});},'isOffset':function(_0x29141f,_0x3cf071,_0x5d38c4,_0xff3766,_0x2bab38){_0x5d38c4=_0x5d38c4||0x0;_0xff3766=_0xff3766||0xa;_0x2bab38=_0x2bab38||0x6;var _0x19e4aa=Math[a33_0x385c('0x37')](0x0,_0x29141f['x']-_0xff3766-_0x5d38c4);var _0x732d07=Math[a33_0x385c('0x37')](0x0,_0x29141f['y']-_0xff3766-_0x5d38c4);var _0xe99be5=Math[a33_0x385c('0x38')](this[a33_0x385c('0xd')][a33_0x385c('0x1e')],_0x29141f['x']+_0xff3766+_0x5d38c4);var _0x4b44ee=Math[a33_0x385c('0x38')](this[a33_0x385c('0xd')][a33_0x385c('0x2d')],_0x29141f['y']+_0xff3766+_0x5d38c4);if(_0x3cf071['y']>=_0x732d07&&_0x3cf071['y']<=_0x4b44ee&&_0x3cf071['x']>=_0x19e4aa&&_0x3cf071['x']<=_0xe99be5){return!![];}else{return![];}},'processPackets':function(){var _0xb3028f=this;var _0xcde5df;if(_0xb3028f[a33_0x385c('0x16')]['length']>0x0)log[a33_0x385c('0x28')](JSON['stringify'](_0xb3028f[a33_0x385c('0x16')]));for(var _0xa2789d in _0xb3028f[a33_0x385c('0x16')]){if(_0xa2789d!=null&&typeof _0xa2789d!==a33_0x385c('0x39')){if(_0xb3028f[a33_0x385c('0x16')][a33_0x385c('0x3a')](_0xa2789d)){if(_0xb3028f[a33_0x385c('0x16')][_0xa2789d][a33_0x385c('0x35')]>0x0&&typeof _0xb3028f[a33_0x385c('0x16')][_0xa2789d]!='undefined'&&_0xb3028f[a33_0x385c('0x16')][_0xa2789d]!=null){var _0x11d7e4=_0xb3028f[a33_0x385c('0x30')](_0xa2789d);if(_0x11d7e4&&_0x11d7e4['mapStatus']>=0x2&&_0xb3028f[a33_0x385c('0xe')][a33_0x385c('0x3b')]['getConnection'](_0xa2789d)!=null&&typeof _0xb3028f[a33_0x385c('0xe')][a33_0x385c('0x3b')][a33_0x385c('0x3c')](_0xa2789d)!=a33_0x385c('0x39')){_0xcde5df=_0xb3028f[a33_0x385c('0xe')]['socket'][a33_0x385c('0x3c')](_0xa2789d);var _0x18ddda=_0xb3028f[a33_0x385c('0x16')][_0xa2789d][a33_0x385c('0x35')];var _0x12ff1a=[];for(var _0x5b8d05=0x0;_0x5b8d05<_0xb3028f[a33_0x385c('0x3d')];++_0x5b8d05){if(_0xb3028f['packets'][_0xa2789d][a33_0x385c('0x35')]==0x0)break;_0x12ff1a[a33_0x385c('0x34')](_0xb3028f[a33_0x385c('0x16')][_0xa2789d]['shift']());}_0xcde5df['send'](_0x12ff1a);}else delete _0xb3028f['server'][a33_0x385c('0x3b')]['getConnection'](_0xa2789d);}}}}},'pushToPlayer':function(_0x40bcaa,_0x535231){if(!_0x535231)return;var _0x5a0807=this;if(_0x40bcaa&&_0x40bcaa['id']in _0x5a0807[a33_0x385c('0x16')]){if(_0x535231 instanceof Messages[a33_0x385c('0x3e')]){_0x5a0807[a33_0x385c('0x16')][_0x40bcaa['id']][a33_0x385c('0x34')](_0x535231[a33_0x385c('0x3f')](_0x40bcaa));}else _0x5a0807[a33_0x385c('0x16')][_0x40bcaa['id']][a33_0x385c('0x34')](_0x535231[a33_0x385c('0x40')]());}else{log['error'](a33_0x385c('0x41'));try{throw new Error();}catch(_0x470659){log['info'](_0x470659[a33_0x385c('0x42')]);}}},'pushBroadcast':function(_0x136b7a,_0x444133){if(!_0x136b7a)return;var _0x185a37=this;for(var _0x2cabce in _0x185a37['packets']){if(_0x185a37[a33_0x385c('0x16')][a33_0x385c('0x3a')](_0x2cabce)){if(_0x2cabce!=_0x444133){if(_0x136b7a instanceof Messages['Spawn']){_0x185a37[a33_0x385c('0x16')][_0x2cabce][a33_0x385c('0x34')](_0x136b7a[a33_0x385c('0x3f')](this['players'][_0x2cabce]));}else _0x185a37[a33_0x385c('0x16')][_0x2cabce][a33_0x385c('0x34')](_0x136b7a[a33_0x385c('0x40')]());}}}},'pushNeighbours':function(_0x2ab4d5,_0x58d602,_0x16d876){var _0x5b34b8=this;log['info'](JSON[a33_0x385c('0x43')](_0x58d602[a33_0x385c('0x40')]()));var _0x115b75=_0x5b34b8[a33_0x385c('0x44')](_0x2ab4d5,0x14);if(_0x2ab4d5 instanceof Player)_0x115b75[a33_0x385c('0x34')](_0x2ab4d5);log['info'](_0x115b75[a33_0x385c('0x35')]);for(var _0x334f53 in _0x115b75){var _0x20d5cf=_0x115b75[_0x334f53];if(_0x20d5cf instanceof Player){if(!_0x16d876||_0x16d876&&_0x20d5cf!=_0x16d876){log[a33_0x385c('0x28')](a33_0x385c('0x45')+JSON[a33_0x385c('0x43')](_0x58d602[a33_0x385c('0x40')]()));if(_0x58d602 instanceof Messages['Spawn']){_0x5b34b8[a33_0x385c('0x16')][_0x20d5cf['id']][a33_0x385c('0x34')](_0x58d602[a33_0x385c('0x3f')](_0x5b34b8[a33_0x385c('0x46')][_0x20d5cf['id']]));}else _0x5b34b8[a33_0x385c('0x16')][_0x20d5cf['id']][a33_0x385c('0x34')](_0x58d602[a33_0x385c('0x40')]());}}}},'isMobsOnSameTile':function(_0x582661){var _0x627386=_0x582661['x'],_0x3d06cb=_0x582661['y'],_0x23e3b8=![],_0x4c71d0=0x0,_0x45fb7a=0x0;if(_0x582661[a33_0x385c('0x47')]&&_0x582661[a33_0x385c('0x47')]['length']>0x0){_0x627386=_0x582661['path'][_0x582661[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x0];_0x3d06cb=_0x582661[a33_0x385c('0x47')][_0x582661[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x1];}_[a33_0x385c('0x2f')](self[a33_0x385c('0x12')],function(_0x481b7c){if(_0x481b7c[a33_0x385c('0x48')]()){_0x4c71d0=_0x481b7c[a33_0x385c('0x47')][_0x481b7c[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x0];_0x45fb7a=_0x481b7c['path'][_0x481b7c[a33_0x385c('0x47')]['length']-0x1][0x1];}else{_0x4c71d0=_0x481b7c['x'];_0x45fb7a=_0x481b7c['y'];}if(_0x481b7c['id']!=_0x582661['id']&&_0x627386==_0x4c71d0&&_0x3d06cb==_0x45fb7a){_0x23e3b8=!![];}});return _0x23e3b8;},'getFreeAdjacentNonDiagonalPosition':function(_0x14e97e){var _0x185168=this,_0x2dbf24=null;_0x14e97e[a33_0x385c('0x49')](function(_0x5a39e2,_0x4347a4,_0x23611f){if(!_0x2dbf24&&!_0x185168[a33_0x385c('0xd')]['isColliding'](_0x5a39e2,_0x4347a4)&&!_0x185168['isCharacterAt'](_0x5a39e2,_0x4347a4)){_0x2dbf24={'x':_0x5a39e2,'y':_0x4347a4,'o':_0x23611f};}});return _0x2dbf24;},'getFreeFutureAdjacentNonDiagonalPosition':function(_0x83eee0){var _0x277558=this,_0x30a5b4=[];_0x83eee0[a33_0x385c('0x4a')](function(_0x553f78,_0x2fc2c0,_0x4f787b){if(!_0x277558[a33_0x385c('0xd')][a33_0x385c('0x4b')](_0x553f78,_0x2fc2c0)&&!_0x277558[a33_0x385c('0x4c')](_0x553f78,_0x2fc2c0)&&!_0x277558['isPetAt'](_0x553f78,_0x2fc2c0)){_0x30a5b4[a33_0x385c('0x34')]({'x':_0x553f78,'y':_0x2fc2c0,'o':_0x4f787b});}});return _0x30a5b4;},'getRandomPosition':function(_0x647082,_0x12293b){var _0xf9c8b8={};var _0x18beb3=![];var _0x314a8f=0xa;var _0xb32ce=0x0;while(_0xb32ce++<_0x314a8f&&(_0xf9c8b8['y']!=_0x647082['y']&&_0xf9c8b8['x']!=_0x647082['x'])){var _0x372036=Utils[a33_0x385c('0x4d')](-_0x12293b,_0x12293b);var _0x428b67=Utils[a33_0x385c('0x4d')](-_0x12293b,_0x12293b);_0xf9c8b8['x']=_0x647082['x']+_0x372036;_0xf9c8b8['y']=_0x647082['y']+_0x428b67;_0x18beb3=this[a33_0x385c('0xd')][a33_0x385c('0x4e')](_0xf9c8b8['x'],_0xf9c8b8['y']);if(_0x18beb3)return _0xf9c8b8;}return null;},'handleOpenedChest':function(_0x2182b2,_0x471270){var _0x5c1356=this;_0x5c1356[a33_0x385c('0x4f')](_0x2182b2[a33_0x385c('0x50')],_0x2182b2[a33_0x385c('0x51')]());_0x5c1356[a33_0x385c('0x52')](_0x2182b2);var _0x338415=_0x5c1356['server'][a33_0x385c('0x53')](_0x471270,_0x2182b2,![]);if(_0x338415&&_0x338415 instanceof Item){_0x338415['x']=_0x2182b2['x'];_0x338415['y']=_0x2182b2['y'];_0x2182b2[a33_0x385c('0xd')][a33_0x385c('0x10')][a33_0x385c('0x54')](new Messages[(a33_0x385c('0x3e'))](_0x338415));_0x5c1356['server']['handleItemDespawn'](_0x338415);}_0x2182b2[a33_0x385c('0x55')]();},'spawnStaticEntities':function(_0x4751b2){var _0x42bb7c=this;var _0x3b1549=0x0;_['each'](_0x42bb7c[a33_0x385c('0xd')]['staticEntities'],function(_0x47f4c9,_0x34f267){var _0x34a1bf;if(MobData[a33_0x385c('0x56')][_0x47f4c9])_0x34a1bf=MobData['Properties'][_0x47f4c9]['kind'];else if(NpcData['Properties'][_0x47f4c9]){_0x34a1bf=NpcData[a33_0x385c('0x56')][_0x47f4c9]['kind'];}var _0x12916c=_0x4751b2['tileIndexToGridPosition'](_0x34f267);if(NpcData[a33_0x385c('0x57')](_0x34a1bf))_0x4751b2[a33_0x385c('0x10')][a33_0x385c('0x58')](_0x34a1bf,_0x12916c['x']+0x1,_0x12916c['y']);if(MobData[a33_0x385c('0x59')](_0x34a1bf)){var _0x47fad2=new Mob(0x11170+ ++_0x42bb7c[a33_0x385c('0x1b')],_0x34a1bf,_0x12916c['x']+0x1,_0x12916c['y'],_0x42bb7c[a33_0x385c('0xd')]);_0x47fad2[a33_0x385c('0x5a')](function(){_0x47fad2[a33_0x385c('0x5b')]=![];_0x47fad2[a33_0x385c('0x5c')]=![];_0x42bb7c[a33_0x385c('0x5d')](_0x47fad2);if(_0x47fad2[a33_0x385c('0x5e')])_0x47fad2[a33_0x385c('0x5e')]['addToArea'](_0x47fad2);});_0x47fad2[a33_0x385c('0x5f')](_0x42bb7c[a33_0x385c('0xe')]['onMobMoveCallback']['bind'](_0x42bb7c[a33_0x385c('0xe')]));_0x42bb7c[a33_0x385c('0x5d')](_0x47fad2);_0x42bb7c[a33_0x385c('0x60')](_0x47fad2);}});},'spawnEntity':function(_0x121043,_0x33c3d0,_0x18ae65,_0xed718f){var _0x125da6=this;var _0x56fcb3;if(NpcData[a33_0x385c('0x57')](_0x121043)){_0x56fcb3=_0x125da6['addNpc'](_0x121043,_0x33c3d0,_0x18ae65,_0xed718f);}else if(GatherData[a33_0x385c('0x61')](_0x121043)){var _0x44f9c2=new Gather(0x9c40+ ++_0x125da6[a33_0x385c('0x1b')],_0x121043,_0x33c3d0,_0x18ae65,_0xed718f);if(_0x33c3d0>-0x1&&_0x18ae65>-0x1)_0x44f9c2[a33_0x385c('0x62')](_0xed718f[a33_0x385c('0x2b')]);_0x125da6['addGather'](_0x44f9c2);_0x44f9c2[a33_0x385c('0x5a')](function(){log['info']('gather.onRespawn()\x20-\x20called');var _0x23d774=~~Utils[a33_0x385c('0x63')](0x0,_0xed718f['width']);var _0x64a52b=~~Utils['randomRange'](0x0,_0xed718f[a33_0x385c('0x2d')]);while(!_0x125da6['map'][a33_0x385c('0x4e')](_0x23d774,_0x64a52b)){_0x23d774=~~Utils[a33_0x385c('0x63')](0x0,_0xed718f['width']);_0x64a52b=~~Utils[a33_0x385c('0x63')](0x0,_0xed718f[a33_0x385c('0x2d')]);}_0x44f9c2[a33_0x385c('0x64')](_0x23d774,_0x64a52b);_0x125da6[a33_0x385c('0x65')](_0x44f9c2);});_0x56fcb3=_0x44f9c2;}else if(MobData['isMob'](_0x121043)){var _0x59a3df=new Mob(0x11170+ ++_0x125da6[a33_0x385c('0x1b')],_0x121043,_0x33c3d0,_0x18ae65,_0xed718f,_0x59a3df[a33_0x385c('0x5e')]);_0x59a3df['onRespawn'](function(){if(_0x125da6[a33_0x385c('0xd')][a33_0x385c('0x66')]==0x4)return;_0x59a3df[a33_0x385c('0x5b')]=![];_0x59a3df['droppedItem']=![];_0x125da6['addMob'](_0x59a3df);if(_0x59a3df['area']&&_0x59a3df['area']instanceof ChestArea)_0x59a3df['area'][a33_0x385c('0x67')](_0x59a3df);});_0x59a3df[a33_0x385c('0x5f')](_0x125da6[a33_0x385c('0xe')][a33_0x385c('0x68')][a33_0x385c('0x24')](_0x125da6[a33_0x385c('0xe')]));_0x125da6[a33_0x385c('0x5d')](_0x59a3df);_0x125da6[a33_0x385c('0x60')](_0x59a3df);_0x56fcb3=_0x59a3df;}return _0x56fcb3;},'removeFromGroups':function(_0x281159){var _0xf8b298=this[a33_0x385c('0xd')];var _0x229dc3=this;var _0x38d71c=[];if(_0x281159&&_0x281159['group']){var _0x102ff0=_0x229dc3[a33_0x385c('0x18')][_0x281159[a33_0x385c('0x50')]];if(_0x281159 instanceof Player||_0x281159 instanceof NpcPlayer){if(_0x102ff0&&_0x102ff0[a33_0x385c('0x46')]){_0x102ff0['players']=_[a33_0x385c('0x69')](_0x102ff0['players'],function(_0x53c9c0){return _0x53c9c0===_0x281159['id'];});}}_0xf8b298[a33_0x385c('0x6a')](_0x281159[a33_0x385c('0x50')],function(_0x6c9805){if(_0x229dc3[a33_0x385c('0x18')][_0x6c9805]&&_0x281159['id']in _0x229dc3['groups'][_0x6c9805][a33_0x385c('0x10')]){delete _0x229dc3['groups'][_0x6c9805][a33_0x385c('0x10')][_0x281159['id']];_0x38d71c[a33_0x385c('0x34')](_0x6c9805);}});_0x281159[a33_0x385c('0x50')]=null;}return _0x38d71c;},'pushToGroup':function(_0x599785,_0x87febe,_0x1a168d){var _0x130a92=this[a33_0x385c('0xd')];var _0x3a347b=this;var _0xd50aa5=this[a33_0x385c('0x18')][_0x599785];if(_0xd50aa5){_[a33_0x385c('0x2f')](_0xd50aa5[a33_0x385c('0x46')],function(_0x85133){var _0x512142=_0x3a347b[a33_0x385c('0x30')](_0x85133);if(_0x512142 instanceof Player&&_0x85133!==_0x1a168d)_0x3a347b[a33_0x385c('0x32')](_0x512142,_0x87febe);});}},'addAsIncomingToGroup':function(_0xe2f2bf,_0x154520){var _0x40fd32=this;var _0x76f8dc=_0xe2f2bf&&_0xe2f2bf instanceof Chest;var _0x5765d7=_0xe2f2bf&&_0xe2f2bf instanceof Item;var _0x471179=_0xe2f2bf&&_0x5765d7&&!_0xe2f2bf[a33_0x385c('0x6b')]&&!_0xe2f2bf[a33_0x385c('0x6c')];if(_0xe2f2bf&&_0x154520){_0x40fd32['map'][a33_0x385c('0x6a')](_0x154520,function(_0x116d24){var _0x1e8cad=_0x40fd32[a33_0x385c('0x18')][_0x116d24];if(_0x1e8cad){if(!_[a33_0x385c('0x6d')](_0x1e8cad['entities'],_0xe2f2bf['id'])&&(!_0x5765d7||_0x76f8dc||_0x5765d7&&!_0x471179))_0x1e8cad['incoming'][a33_0x385c('0x34')](_0xe2f2bf);}});}},'addToGroup':function(_0x5a17c4,_0x1d9b61){var _0x3eedb3=this;var _0x2969e7=[];if(_0x5a17c4&&_0x1d9b61&&_0x1d9b61 in _0x3eedb3['groups']){if(_0x3eedb3[a33_0x385c('0x18')][a33_0x385c('0x3a')](_0x1d9b61)){this[a33_0x385c('0xd')]['forEachAdjacentGroup'](_0x1d9b61,function(_0x5a6417){if(_0x3eedb3[a33_0x385c('0x18')][_0x5a6417]&&_0x3eedb3[a33_0x385c('0x18')][_0x5a6417]['entities']){_0x3eedb3['groups'][_0x5a6417]['entities'][_0x5a17c4['id']]=_0x5a17c4;_0x2969e7[a33_0x385c('0x34')](_0x5a6417);}});_0x5a17c4[a33_0x385c('0x50')]=_0x1d9b61;if(_0x5a17c4 instanceof Player)_0x3eedb3[a33_0x385c('0x18')][_0x1d9b61]['players'][a33_0x385c('0x34')](_0x5a17c4['id']);}}return _0x2969e7;},'pushToAdjacentGroups':function(_0xf56cf8,_0x6871d9,_0x232672){var _0x101c57=this;_0x101c57[a33_0x385c('0xd')][a33_0x385c('0x6a')](_0xf56cf8,function(_0xd38cd5){_0x101c57[a33_0x385c('0x6e')](_0xd38cd5,_0x6871d9,_0x232672);});},'pushToPreviousGroups':function(_0x2c05e4,_0x17da1f){var _0x24c66d=this;_['each'](_0x2c05e4[a33_0x385c('0x6f')],function(_0x4032a2){if(_0x2c05e4[a33_0x385c('0x50')]!=_0x4032a2)_0x24c66d[a33_0x385c('0x6e')](_0x4032a2,_0x17da1f);});_0x2c05e4[a33_0x385c('0x6f')]=[];},'pushRelevantEntitySpawnTo':function(_0x38ceb6){var _0x23f838=this;var _0x376578;_0x376578=this[a33_0x385c('0x70')](_0x38ceb6,0x1e);if(_0x376578){for(var _0x1eb627 in _0x376578){var _0x758486=_0x376578[_0x1eb627];if(!_0x758486||_0x758486 instanceof Player&&_0x758486[a33_0x385c('0x71')]<0x2)continue;_0x23f838[a33_0x385c('0x32')](_0x38ceb6,_0x758486[a33_0x385c('0x26')]());}}},'pushAllMobSpawnTo':function(_0x55504d){var _0x2086e8=this;if(_0x55504d&&_0x55504d[a33_0x385c('0x50')]in _0x2086e8[a33_0x385c('0x18')]){_0x2086e8[a33_0x385c('0x72')](function(_0x4c79b5){_0x2086e8['pushToPlayer'](_0x55504d,_0x4c79b5[a33_0x385c('0x26')]());});}},'addEntity':function(_0x6715b5){var _0x1defa9=this;_0x1defa9[a33_0x385c('0x10')][_0x6715b5['id']]=_0x6715b5;_0x1defa9['handleEntityGroupMembership'](_0x6715b5);},'addPlayer':function(_0x223295){log[a33_0x385c('0x28')](a33_0x385c('0x73')+_0x223295['id']);var _0x1e9bc2=this;_0x1e9bc2[a33_0x385c('0x74')](_0x223295);_0x1e9bc2[a33_0x385c('0x46')][_0x223295['id']]=_0x223295;_0x1e9bc2[a33_0x385c('0x16')][_0x223295['id']]=[];},'addChest':function(_0x4ab0cd){var _0x538eaf=this;_0x538eaf[a33_0x385c('0x74')](_0x4ab0cd);_0x538eaf[a33_0x385c('0x75')][_0x4ab0cd['id']]=_0x4ab0cd;},'addMob':function(_0x2d9620){var _0x589d42=this;_0x589d42['addEntity'](_0x2d9620);_0x589d42[a33_0x385c('0x12')][_0x2d9620['id']]=_0x2d9620;},'addGather':function(_0x25ae65){var _0x387e25=this;_0x387e25['addEntity'](_0x25ae65);_0x387e25[a33_0x385c('0x76')][_0x25ae65['id']]=_0x25ae65;},'addNpc':function(_0x4ae859,_0x239005,_0x274095){var _0x174c65=this;var _0x4d496c=new Npc(0x13880+ ++_0x174c65[a33_0x385c('0x1b')],_0x4ae859,_0x239005,_0x274095,_0x174c65[a33_0x385c('0xd')]);_0x174c65[a33_0x385c('0x74')](_0x4d496c);_0x174c65['npcs'][_0x4d496c['id']]=_0x4d496c;return _0x4d496c;},'addPet':function(_0x510a51,_0x2f0958,_0x3dad2c,_0xb8e2d3){var _0x5cbb88=this;log[a33_0x385c('0x28')](a33_0x385c('0x77')+_0x510a51['id']);var _0x274cdd=new Pet(0x15f90+ ++_0x5cbb88[a33_0x385c('0x1b')],_0x2f0958,_0x3dad2c,_0xb8e2d3,_0x510a51,_0x510a51['name']+a33_0x385c('0x78'),_0x510a51[a33_0x385c('0xd')],_0x510a51['pets'][a33_0x385c('0x35')]);_0x5cbb88[a33_0x385c('0x74')](_0x274cdd);_0x5cbb88['pets'][_0x274cdd['id']]=_0x274cdd;_0x510a51[a33_0x385c('0x15')]['push'](_0x274cdd);_0x274cdd['onStep'](function(){});_0x274cdd['onRequestPath'](function(_0x3dad2c,_0xb8e2d3){if(this['x']==_0x3dad2c&&this['y']==_0xb8e2d3)return null;ignore=[this,_0x5cbb88['getEntityById'](this[a33_0x385c('0x79')])];var _0x35e378=_0x5cbb88['findPath'](this,_0x3dad2c,_0xb8e2d3);return _0x35e378;});_0x274cdd[a33_0x385c('0x7a')](function(_0x3dad2c,_0xb8e2d3){});_0x274cdd['onMoveCallback'](function(){_0x5cbb88[a33_0x385c('0x54')](new Messages[(a33_0x385c('0x7b'))](_0x274cdd),![]);});return _0x274cdd;},'addNpcPlayer':function(_0x280f75){log['info'](a33_0x385c('0x7c')+_0x280f75['id']);var _0x2faeab=this;_0x2faeab[a33_0x385c('0x74')](_0x280f75);_0x2faeab[a33_0x385c('0x11')][_0x280f75['id']]=_0x280f75;return _0x280f75;},'addItem':function(_0x492673){var _0x5e7030=this;_0x5e7030['addEntity'](_0x492673);_0x5e7030[a33_0x385c('0x7d')][_0x492673['id']]=_0x492673;return _0x492673;},'addPvpBase':function(_0x46ed92,_0x4af09f,_0x5b19c0){var _0x4e362c=new PvpBase(0x2710+ ++this[a33_0x385c('0x1b')],_0x46ed92,_0x4af09f,this[a33_0x385c('0xd')],_0x5b19c0);this[a33_0x385c('0x10')][_0x4e362c['id']]=_0x4e362c;this[a33_0x385c('0x7e')](_0x4e362c);this[a33_0x385c('0x7f')][_0x4e362c['id']]=_0x4e362c;return _0x4e362c;},'addHouse':function(_0x131d57,_0x5bf989,_0x19e159){var _0x9f0dca=new House(0x3a98+ ++this['entityCount'],_0x131d57,_0x5bf989,_0x19e159,this[a33_0x385c('0xd')]);this[a33_0x385c('0x10')][_0x9f0dca['id']]=_0x9f0dca;this[a33_0x385c('0x7e')](_0x9f0dca);this[a33_0x385c('0x80')][_0x9f0dca['id']]=_0x9f0dca;return _0x9f0dca;},'removeEntity':function(_0x3400fe){var _0x8d1da3=this;if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x11')])delete _0x8d1da3[a33_0x385c('0x11')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3['pets'])delete _0x8d1da3[a33_0x385c('0x15')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x10')])delete _0x8d1da3['entities'][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x12')])delete _0x8d1da3[a33_0x385c('0x12')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x7d')])delete _0x8d1da3[a33_0x385c('0x7d')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3['gather'])delete _0x8d1da3[a33_0x385c('0x76')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x46')])delete _0x8d1da3['players'][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3['pvpBases'])delete _0x8d1da3[a33_0x385c('0x7f')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x80')])delete _0x8d1da3[a33_0x385c('0x80')][_0x3400fe['id']];if(_0x3400fe['id']in _0x8d1da3[a33_0x385c('0x75')])delete _0x8d1da3[a33_0x385c('0x75')][_0x3400fe['id']];if(_0x3400fe['type']==a33_0x385c('0x81')){_0x8d1da3['server']['clearMobAggroLink'](_0x3400fe);_0x8d1da3[a33_0x385c('0xe')]['clearMobHateLinks'](_0x3400fe);}_0x3400fe[a33_0x385c('0x82')]();_0x8d1da3['removeFromGroups'](_0x3400fe);},'removePlayer':function(_0x56a212){log[a33_0x385c('0x28')](a33_0x385c('0x83'));var _0x2bf150=this;if(_0x56a212[a33_0x385c('0x84')]&&_0x56a212[a33_0x385c('0x84')]>0x0){_0x2bf150[a33_0x385c('0xe')][a33_0x385c('0x84')][_0x56a212['pvpSide']-0x1][a33_0x385c('0x85')]-=_0x56a212[a33_0x385c('0x86')];}if(_0x56a212[a33_0x385c('0x15')]){for(var _0x20e3af=_0x56a212[a33_0x385c('0x15')][a33_0x385c('0x35')]-0x1;_0x20e3af>=0x0;--_0x20e3af){var _0x54ea51=_0x56a212[a33_0x385c('0x15')][_0x20e3af];_0x54ea51['playerId']=null;_0x56a212[a33_0x385c('0x87')][a33_0x385c('0x88')](_0x54ea51[a33_0x385c('0x51')]());_0x2bf150[a33_0x385c('0x52')](_0x54ea51);delete _0x2bf150[a33_0x385c('0x15')][_0x54ea51['id']];}}if(_0x56a212 instanceof Player)_0x56a212[a33_0x385c('0x87')][a33_0x385c('0x88')](_0x56a212[a33_0x385c('0x51')](0x0));_0x2bf150[a33_0x385c('0x52')](_0x56a212);log[a33_0x385c('0x28')](a33_0x385c('0x89'));delete _0x2bf150['players'][_0x56a212['id']];delete _0x2bf150[a33_0x385c('0x16')][_0x56a212['id']];delete _0x2bf150[a33_0x385c('0x10')][_0x56a212['id']];delete _0x56a212;_0x2bf150[a33_0x385c('0xe')][a33_0x385c('0x8a')]();},'removeNpcPlayer':function(_0x29f2cf){log[a33_0x385c('0x28')](a33_0x385c('0x83'));var _0x519737=this;if(_0x29f2cf[a33_0x385c('0x84')]>0x0)_0x519737[a33_0x385c('0x84')][_0x29f2cf[a33_0x385c('0x84')]-0x1][a33_0x385c('0x85')]-=_0x29f2cf['level'];_0x519737['pushBroadcast'](_0x29f2cf['despawn'](0x0));_0x519737[a33_0x385c('0x52')](_0x29f2cf);delete _0x519737[a33_0x385c('0x11')][_0x29f2cf['id']];},'createItem':function(_0x4005d9,_0x34323c,_0x26cfb2,_0x32829a){var _0x551127=this;var _0x374ace=0x7530+ ++_0x551127[a33_0x385c('0x1b')];var _0x4c43d6=null;_0x4c43d6=new Item(_0x374ace,_0x4005d9,_0x34323c,_0x26cfb2,_0x32829a,_0x551127[a33_0x385c('0xd')]);return _0x4c43d6;},'createChest':function(_0x7ef3af,_0x265334,_0x1c3200){var _0x4282e1=this;var _0x406891=_0x4282e1['createItem'](0x25,_0x7ef3af,_0x265334);_0x406891['map']=_0x4282e1[a33_0x385c('0xd')];return _0x406891;},'addStaticItem':function(_0xb983ab,_0x5a84df){var _0x87c248=this;_0x5a84df[a33_0x385c('0x6b')]=!![];_0x5a84df[a33_0x385c('0x5a')](_0x87c248['addStaticItem']['bind'](_0x87c248,_0x5a84df));return _0x87c248['addItem'](_0x5a84df);},'addItemFromChest':function(_0x493513,_0x3392b9,_0x2743ca){var _0xd2cd3a=this;var _0x3017ad=_0xd2cd3a[a33_0x385c('0x8b')](_0x493513,_0x3392b9,_0x2743ca);_0x3017ad[a33_0x385c('0x6c')]=!![];return _0xd2cd3a[a33_0x385c('0x8c')](_0x3017ad);},'getEntityById':function(_0x5c7165){var _0x50dd5b=this;if(_0x5c7165 in _0x50dd5b[a33_0x385c('0x10')]){if(_0x50dd5b['entities'][a33_0x385c('0x3a')](_0x5c7165))return _0x50dd5b[a33_0x385c('0x10')][_0x5c7165];}else{}},'getEntitiesByPosition':function(_0x2ab396,_0x461a6b){entities=[];this[a33_0x385c('0x8d')](function(_0x529241){if(_0x529241['x']==_0x2ab396&&_0x529241['y']==_0x461a6b)entities[a33_0x385c('0x34')](_0x529241);});return entities;},'isCharacterAt':function(_0x4fc0b5,_0xc89ce3){return this['entitygrid'][_0x4fc0b5][_0xc89ce3]===0x1;},'isMobAt':function(_0x27cdac,_0x309f8d){var _0x283c31=![];this[a33_0x385c('0x72')](function(_0x467057){var _0x510f43=_0x467057['x'],_0x178d66=_0x467057['y'];if(_0x467057[a33_0x385c('0x47')]&&_0x467057[a33_0x385c('0x47')][a33_0x385c('0x35')]>0x0){_0x510f43=_0x467057[a33_0x385c('0x47')][_0x467057[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x0];_0x178d66=_0x467057[a33_0x385c('0x47')][_0x467057[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x1];}if(_0x27cdac==_0x510f43&&_0x309f8d==_0x178d66)_0x283c31=!![];});return _0x283c31;},'isPetAt':function(_0x14e24c,_0x44a316){var _0x523bab=![];this[a33_0x385c('0x8e')](function(_0x32efb0){var _0x2173a0=_0x32efb0['x'],_0xb00292=_0x32efb0['y'];if(_0x32efb0[a33_0x385c('0x47')]&&_0x32efb0['path']['length']>0x0){_0x2173a0=_0x32efb0[a33_0x385c('0x47')][_0x32efb0[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x0];_0xb00292=_0x32efb0[a33_0x385c('0x47')][_0x32efb0[a33_0x385c('0x47')][a33_0x385c('0x35')]-0x1][0x1];}if(_0x14e24c==_0x2173a0&&_0x44a316==_0xb00292)_0x523bab=!![];});return _0x523bab;},'forEachEntity':function(_0xaf3aa4){var _0xed4c07=this;for(var _0x3f56c5 in _0xed4c07[a33_0x385c('0x10')]){if(_0xed4c07['entities']['hasOwnProperty'](_0x3f56c5))_0xaf3aa4(_0xed4c07[a33_0x385c('0x10')][_0x3f56c5]);}},'forEachEntityAround':function(_0x883ec9,_0x2995e2,_0x13033a,_0x5970ad){var _0x4bcdce=this;for(var _0x19cfdc in _0x4bcdce[a33_0x385c('0x10')]){var _0x1f7d06=_0x4bcdce[a33_0x385c('0x10')][_0x19cfdc];if(_0x4bcdce[a33_0x385c('0x10')]['hasOwnProperty'](_0x19cfdc)&&_0x1f7d06['x']>=_0x883ec9-_0x13033a&&_0x1f7d06['x']<=_0x883ec9+_0x13033a&&_0x1f7d06['y']>=_0x2995e2-_0x13033a&&_0x1f7d06['y']<=_0x2995e2+_0x13033a){_0x5970ad(_0x1f7d06);}}},'forEachPlayer':function(_0x2d5f46){var _0x159c70=this;for(var _0x1bb47d in _0x159c70[a33_0x385c('0x46')]){if(_0x159c70[a33_0x385c('0x46')]['hasOwnProperty'](_0x1bb47d))_0x2d5f46(_0x159c70[a33_0x385c('0x46')][_0x1bb47d]);}},'forEachBothPlayer':function(_0x5f2058){var _0x58296e=this;for(var _0x293bea in _0x58296e[a33_0x385c('0x46')]){if(_0x58296e[a33_0x385c('0x46')][a33_0x385c('0x3a')](_0x293bea))_0x5f2058(_0x58296e[a33_0x385c('0x46')][_0x293bea]);}for(var _0x293bea in _0x58296e['npcPlayers']){if(_0x58296e[a33_0x385c('0x8f')][a33_0x385c('0x3a')](_0x293bea))_0x5f2058(_0x58296e[a33_0x385c('0x8f')][_0x293bea]);}},'forEachMob':function(_0x4da4ff){var _0x211ea1=this;for(var _0x589425 in _0x211ea1[a33_0x385c('0x12')]){if(_0x211ea1['mobs']['hasOwnProperty'](_0x589425))_0x4da4ff(_0x211ea1['mobs'][_0x589425]);}},'forEachCharacter':function(_0x31e73f){var _0x282dfb=this;_0x282dfb[a33_0x385c('0x90')](_0x31e73f);_0x282dfb[a33_0x385c('0x72')](_0x31e73f);},'forEachPet':function(_0x436e1e){var _0x5650be=this;for(var _0x3046c5 in _0x5650be[a33_0x385c('0x15')]){if(_0x5650be[a33_0x385c('0x15')]['hasOwnProperty'](_0x3046c5))_0x436e1e(_0x5650be[a33_0x385c('0x15')][_0x3046c5]);}},'forEachGather':function(_0x3ccb3c){var _0x3fa5a3=this;for(var _0xa55e4b in _0x3fa5a3[a33_0x385c('0x76')]){if(_0x3fa5a3[a33_0x385c('0x76')][a33_0x385c('0x3a')](_0xa55e4b))_0x3ccb3c(_0x3fa5a3[a33_0x385c('0x76')][_0xa55e4b]);}},'forEachNpcPlayer':function(_0x569eee){var _0xb3cc56=this;for(var _0x2e38fa in _0xb3cc56[a33_0x385c('0x11')]){if(_0xb3cc56[a33_0x385c('0x11')][a33_0x385c('0x3a')](_0x2e38fa))_0x569eee(_0xb3cc56[a33_0x385c('0x11')][_0x2e38fa]);}},'forEachHouse':function(_0x2169ab){var _0x52b155=this;for(var _0x5d8a06 in _0x52b155['houses']){if(_0x52b155[a33_0x385c('0x80')][a33_0x385c('0x3a')](_0x5d8a06))_0x2169ab(_0x52b155[a33_0x385c('0x80')][_0x5d8a06]);}},'handleEntityGroupMembership':function(_0x33028a){var _0x3fc0d0=this;var _0x40c8e4=![];if(_0x33028a){var _0x1541a7=_0x3fc0d0[a33_0x385c('0xd')][a33_0x385c('0x91')](_0x33028a['x'],_0x33028a['y']);if(!_0x33028a['group']||_0x33028a[a33_0x385c('0x50')]&&_0x33028a['group']!==_0x1541a7){_0x40c8e4=!![];_0x3fc0d0[a33_0x385c('0x92')](_0x33028a,_0x1541a7);var _0x4c19cf=_0x3fc0d0[a33_0x385c('0x93')](_0x33028a);var _0x4b06a1=_0x3fc0d0[a33_0x385c('0x94')](_0x33028a,_0x1541a7);if(_['size'](_0x4c19cf)>0x0)_0x33028a[a33_0x385c('0x6f')]=_['difference'](_0x4c19cf,_0x4b06a1);}}return _0x40c8e4;},'itemDespawn':function(_0x349d7a){this[a33_0x385c('0x4f')](_0x349d7a[a33_0x385c('0x50')],new Messages['Destroy'](_0x349d7a));this[a33_0x385c('0x52')](_0x349d7a);},'handleEmptyChestArea':function(_0x345a4e){var _0xdc8977=this;if(_0x345a4e){var _0x35b6ad=_0xdc8977['addItem'](_0xdc8977[a33_0x385c('0x95')](_0x345a4e[a33_0x385c('0x96')],_0x345a4e[a33_0x385c('0x97')],_0x345a4e['items']));_0xdc8977[a33_0x385c('0x98')](_0x35b6ad);}},'isMobsOnTile':function(_0x466f46,_0x4c2ffd){var _0x33ca67=![],_0x504c00=0x0,_0x29fb87=0x0;_[a33_0x385c('0x2f')](this['mobs'],function(_0x961cf8){if(_0x961cf8[a33_0x385c('0x48')]()){_0x504c00=_0x961cf8['path'][_0x961cf8['path'][a33_0x385c('0x35')]-0x1][0x0];_0x29fb87=_0x961cf8[a33_0x385c('0x47')][_0x961cf8['path']['length']-0x1][0x1];}else{_0x504c00=_0x961cf8['x'];_0x29fb87=_0x961cf8['y'];}if(_0x466f46==_0x504c00&&_0x4c2ffd==_0x29fb87){_0x33ca67=!![];}});return _0x33ca67;},'tryAddingMobToChestArea':function(_0x75154e){var _0x5e40d7=this;_[a33_0x385c('0x2f')](_0x5e40d7[a33_0x385c('0x17')],function(_0x30c2be){if(_0x30c2be['contains'](_0x75154e))_0x30c2be[a33_0x385c('0x67')](_0x75154e);});},'getCharactersAround':function(_0x694c83,_0x1d144a){var _0x49b091=_0x694c83['x'];var _0x433a20=_0x694c83['y'];var _0x586490=[];this[a33_0x385c('0x99')](function(_0x147cec){if(_0x147cec['x']>=_0x49b091-_0x1d144a&&_0x147cec['x']<=_0x49b091+_0x1d144a&&_0x147cec['y']>=_0x433a20-_0x1d144a&&_0x147cec['y']<=_0x433a20+_0x1d144a&&_0x147cec!==_0x694c83){_0x586490[a33_0x385c('0x34')](_0x147cec);}});return _0x586490;},'getPartyAround':function(_0x1ee5c9,_0x4f2ab5){var _0xa1f1d4=[_0x1ee5c9];var _0x5c4aa3=_0x1ee5c9['x'];var _0x54d9cc=_0x1ee5c9['y'];if(_0x1ee5c9[a33_0x385c('0x9a')]){for(var _0x70cf14 in _0x1ee5c9[a33_0x385c('0x9a')]['players']){var _0xb4d0fb=_0x1ee5c9[a33_0x385c('0x9a')][a33_0x385c('0x46')][_0x70cf14];if(_0xb4d0fb['x']>=_0x5c4aa3-_0x4f2ab5&&_0xb4d0fb['x']<=_0x5c4aa3+_0x4f2ab5&&_0xb4d0fb['y']>=_0x54d9cc-_0x4f2ab5&&_0xb4d0fb['y']<=_0x54d9cc+_0x4f2ab5&&_0xb4d0fb!==_0x1ee5c9){_0xa1f1d4[a33_0x385c('0x34')](_0xb4d0fb);}}}return _0xa1f1d4;},'getEntityAround':function(_0x3f678f,_0x1fb903){var _0x2feb82=_0x3f678f['x'];var _0x55143b=_0x3f678f['y'];var _0x1b85cc=[];this[a33_0x385c('0x8d')](function(_0xeec73f){if(_0xeec73f['x']>=_0x2feb82-_0x1fb903&&_0xeec73f['x']<=_0x2feb82+_0x1fb903&&_0xeec73f['y']>=_0x55143b-_0x1fb903&&_0xeec73f['y']<=_0x55143b+_0x1fb903&&_0xeec73f!==_0x3f678f){_0x1b85cc[a33_0x385c('0x34')](_0xeec73f);}});return _0x1b85cc;},'getPlayerAround':function(_0x56b189,_0x36597d){var _0x4431ed=_0x56b189['x'];var _0x190ee0=_0x56b189['y'];var _0x930184=[];this[a33_0x385c('0x90')](function(_0x3dc2e5){if(_0x3dc2e5['x']>=_0x4431ed-_0x36597d&&_0x3dc2e5['x']<=_0x4431ed+_0x36597d&&_0x3dc2e5['y']>=_0x190ee0-_0x36597d&&_0x3dc2e5['y']<=_0x190ee0+_0x36597d&&_0x3dc2e5!==_0x56b189){_0x930184['push'](_0x3dc2e5);}});return _0x930184;},'getEntityAroundCount':function(_0x26ab5c,_0x3a162f){var _0x2c7ca0=_0x26ab5c['x'];var _0xc9ed0c=_0x26ab5c['y'];var _0x3e89eb=0x0;this[a33_0x385c('0x8d')](function(_0x582838){if(_0x582838['x']>=_0x2c7ca0-_0x3a162f&&_0x582838['x']<=_0x2c7ca0+_0x3a162f&&_0x582838['y']>=_0xc9ed0c-_0x3a162f&&_0x582838['y']<=_0xc9ed0c+_0x3a162f&&_0x582838!==_0x26ab5c){++_0x3e89eb;}});return _0x3e89eb;},'getPlayerAroundCount':function(_0x2842ad,_0x3bf80f){var _0x2fa9d5=_0x2842ad['x'];var _0x5893a8=_0x2842ad['y'];var _0x44fd44=0x0;this[a33_0x385c('0x90')](function(_0x24ac2a){if(_0x24ac2a['x']>=_0x2fa9d5-_0x3bf80f&&_0x24ac2a['x']<=_0x2fa9d5+_0x3bf80f&&_0x24ac2a['y']>=_0x5893a8-_0x3bf80f&&_0x24ac2a['y']<=_0x5893a8+_0x3bf80f&&_0x24ac2a!==_0x2842ad){++_0x44fd44;}});return _0x44fd44;},'findPath':function(_0x1a708f,_0x2a1ef4,_0x193aed,_0x4258bf){var _0x582d56=this,_0x2da638=null;if(this[a33_0x385c('0xd')][a33_0x385c('0x4b')](_0x2a1ef4,_0x193aed)){return _0x2da638;}if(this[a33_0x385c('0x19')]&&_0x1a708f){_0x2da638=this['pathfinder'][a33_0x385c('0x9b')](_0x1a708f,_0x2a1ef4,_0x193aed);if(_0x2da638){return _0x2da638;}var _0x42021c=this[a33_0x385c('0x19')][a33_0x385c('0x9c')](_0x582d56[a33_0x385c('0xd')][a33_0x385c('0x2b')],_0x1a708f,_0x2a1ef4,_0x193aed,0x2);_0x2da638=this[a33_0x385c('0x19')]['findShortPath'](_0x42021c[a33_0x385c('0x9d')],_0x1a708f,_0x2a1ef4,_0x193aed,_0x42021c[a33_0x385c('0x9e')],_0x42021c[a33_0x385c('0x9f')],_0x42021c['substart'],_0x42021c['subend']);if(_0x2da638){return _0x2da638;}if(_0x4258bf){_['each'](_0x4258bf,function(_0x226683){_0x582d56[a33_0x385c('0x19')][a33_0x385c('0xa0')](_0x226683);});}_0x2da638=this['pathfinder'][a33_0x385c('0xa1')](_0x582d56['map'][a33_0x385c('0x2b')],_0x1a708f,_0x2a1ef4,_0x193aed,![]);if(_0x4258bf){this[a33_0x385c('0x19')][a33_0x385c('0xa2')](_0x582d56[a33_0x385c('0xd')][a33_0x385c('0x2b')]);}}else{log[a33_0x385c('0xa3')](a33_0x385c('0xa4')+_0x2a1ef4+',\x20'+_0x193aed+a33_0x385c('0xa5')+_0x1a708f['id']);}return _0x2da638;},'spaceEntityRandomApart':function(_0x4df6d4,_0x45af9a,_0x23fa7f){var _0x3c38d4;var _0x1d265c;if(_0x23fa7f&&_0x23fa7f[a33_0x385c('0xa6')]){var _0x1d265c=0x1;while(_0x1d265c>0x0){if(_0x45af9a){_0x3c38d4=_0x45af9a(_0x23fa7f[a33_0x385c('0xa6')]);_0x1d265c=this['getEntityAroundCount']({'x':_0x3c38d4['x'],'y':_0x3c38d4['y']},_0x4df6d4);}}}else{_0x1d265c=0x1;while(_0x1d265c>0x0){if(_0x45af9a){_0x3c38d4=_0x45af9a();_0x1d265c=this[a33_0x385c('0xa7')]({'x':_0x3c38d4['x'],'y':_0x3c38d4['y']},_0x4df6d4);}}}return _0x3c38d4;}});module[a33_0x385c('0xa8')]=MapEntities;