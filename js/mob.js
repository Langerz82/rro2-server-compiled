var a37_0x2800=['exports','extend','mob','Kinds','kind','spawningX','armorLevel','weapon','level','randomRangeInt','max','minLevel','min','maxLevel','respawnTimeout','returnTimeout','isDead','hateCount','tankerlist','aggroRange','attackRange','isAggressive','moveSpeed','setAttackRate','setAggroRate','hpPerLevel','canCall','randomOrientation','isReturning','data','target','flags','isCashedUp','randomInt','updateHitPoints','isBlocking','freeze','aggroCooldown','isOver','hatelist','clearTarget','resetPosition','handleRespawn','any','hates','detect','push','length','points','hate','size','reject','returnToSpawningPosition','area','spawnDelay','removeFromArea','respawnCallback','hasTalked','spawningY','setPosition','distanceToSpawningPoint','path','orientation','getOrientationFromLastMove','moveCallback','resetHitPoints','drops','typemod','attack','defense','modifier','craft','isSpeech','random','Speech','Orientations','RIGHT','LEFT','isNear','DOWN','_getBaseState','name','hitPoints','concat','underscore','./character','./chestarea','./message','./mobspeech','./items'];(function(_0x5966dd,_0x22c7e){var _0x4bbc16=function(_0xb00c15){while(--_0xb00c15){_0x5966dd['push'](_0x5966dd['shift']());}};_0x4bbc16(++_0x22c7e);}(a37_0x2800,0xae));var a37_0x4b9b=function(_0xf4f2e0,_0x2df1d6){_0xf4f2e0=_0xf4f2e0-0x0;var _0x327bc7=a37_0x2800[_0xf4f2e0];return _0x327bc7;};var _=require(a37_0x4b9b('0x0'));var Character=require(a37_0x4b9b('0x1'));var ChestArea=require(a37_0x4b9b('0x2'));var Messages=require(a37_0x4b9b('0x3'));var MobArea=require('./mobarea');var MobData=require('./mobdata');var MobSpeech=require(a37_0x4b9b('0x4'));var Items=require(a37_0x4b9b('0x5'));var Utils=require('./utils');module[a37_0x4b9b('0x6')]=Mob=Character[a37_0x4b9b('0x7')]({'init':function(_0x440c72,_0x1a620e,_0x3a34ba,_0x10a050,_0x55604c,_0x203e75){this['_super'](_0x440c72,a37_0x4b9b('0x8'),_0x1a620e,_0x3a34ba,_0x10a050,_0x55604c);this['map']=_0x55604c;var _0x572a2b=MobData[a37_0x4b9b('0x9')][this[a37_0x4b9b('0xa')]];var _0x49d437=Number(_0x3a34ba),_0x175da0=Number(_0x10a050);this[a37_0x4b9b('0xb')]=_0x49d437;this['spawningY']=_0x175da0;this[a37_0x4b9b('0xc')]=_0x572a2b['armor'];this['weaponLevel']=_0x572a2b[a37_0x4b9b('0xd')];if(_0x572a2b[a37_0x4b9b('0xe')]>0x0)this[a37_0x4b9b('0xe')]=_0x572a2b['level'];else{if(_0x203e75)this[a37_0x4b9b('0xe')]=Utils[a37_0x4b9b('0xf')](Math[a37_0x4b9b('0x10')](_0x572a2b[a37_0x4b9b('0x11')],_0x203e75['minLevel']),Math[a37_0x4b9b('0x12')](_0x572a2b[a37_0x4b9b('0x13')],_0x203e75[a37_0x4b9b('0x13')]));else this[a37_0x4b9b('0xe')]=Utils[a37_0x4b9b('0xf')](_0x572a2b[a37_0x4b9b('0x11')],_0x572a2b[a37_0x4b9b('0x13')]);}this['hatelist']=[];this[a37_0x4b9b('0x14')]=null;this[a37_0x4b9b('0x15')]=null;this[a37_0x4b9b('0x16')]=![];this[a37_0x4b9b('0x17')]=0x0;this[a37_0x4b9b('0x18')]=[];this[a37_0x4b9b('0x19')]=_0x572a2b[a37_0x4b9b('0x19')];this[a37_0x4b9b('0x1a')]=_0x572a2b[a37_0x4b9b('0x1a')];this['isAggressive']=_0x572a2b[a37_0x4b9b('0x1b')];this['setMoveRate'](_0x572a2b[a37_0x4b9b('0x1c')]);this[a37_0x4b9b('0x1d')](0x3e8);this[a37_0x4b9b('0x1e')](~~_0x572a2b[a37_0x4b9b('0x1c')]);if(_0x572a2b['hp'])this['xp']=~~_0x572a2b['hp'];else this['xp']=~~(_0x572a2b[a37_0x4b9b('0x1f')]*this['level']);this['setDrops']();this['spawnDelay']=_0x572a2b['respawn'];this[a37_0x4b9b('0x20')]=!![];if(this[a37_0x4b9b('0xa')]==0x46)this['orientation']=0x2;else this['orientation']=Utils[a37_0x4b9b('0x21')]();this[a37_0x4b9b('0x22')]=![];this[a37_0x4b9b('0x23')]=_0x572a2b;this[a37_0x4b9b('0x24')]=null;this['droppedItem']=![];this['mindAttempt']=![];this[a37_0x4b9b('0x25')]={};this[a37_0x4b9b('0x25')][a37_0x4b9b('0x26')]=Utils[a37_0x4b9b('0x27')](0x0,0xa)==0x0;this[a37_0x4b9b('0x28')]();this[a37_0x4b9b('0x29')]=![];this['hasTalked']=![];this[a37_0x4b9b('0x2a')]=![];},'setAggroRate':function(_0x366e9b){this['aggroCooldown']=new Timer(_0x366e9b);},'canAggro':function(){return this[a37_0x4b9b('0x2b')][a37_0x4b9b('0x2c')]();},'resetAggro':function(_0x44bdef){this[a37_0x4b9b('0x2b')]['lastTime']=_0x44bdef;},'destroy':function(){this[a37_0x4b9b('0x16')]=!![];this[a37_0x4b9b('0x2d')]=[];this['tankerlist']=[];this[a37_0x4b9b('0x2e')]();this[a37_0x4b9b('0x28')]();this[a37_0x4b9b('0x2f')]();this[a37_0x4b9b('0x30')]();},'receiveDamage':function(_0x2af0a3,_0x54d45d){this['hitPoints']-=_0x2af0a3;},'hates':function(_0x4e514a){return _[a37_0x4b9b('0x31')](this[a37_0x4b9b('0x2d')],function(_0x5c5e42){return _0x5c5e42['id']===_0x4e514a;});},'increaseHateFor':function(_0x9afd50,_0x3e979d){if(this[a37_0x4b9b('0x32')](_0x9afd50)){_[a37_0x4b9b('0x33')](this[a37_0x4b9b('0x2d')],function(_0x27be81){return _0x27be81['id']===_0x9afd50;})['hate']+=_0x3e979d;}else{this[a37_0x4b9b('0x2d')][a37_0x4b9b('0x34')]({'id':_0x9afd50,'hate':_0x3e979d});}if(this[a37_0x4b9b('0x15')]){clearTimeout(this[a37_0x4b9b('0x15')]);this[a37_0x4b9b('0x15')]=null;}},'addTanker':function(_0x592f0e){var _0x263b48=0x0;for(_0x263b48=0x0;_0x263b48<this['tankerlist'][a37_0x4b9b('0x35')];_0x263b48++){if(this['tankerlist'][_0x263b48]['id']===_0x592f0e){this[a37_0x4b9b('0x18')][_0x263b48][a37_0x4b9b('0x36')]++;break;}}if(_0x263b48>=this[a37_0x4b9b('0x18')][a37_0x4b9b('0x35')]){this[a37_0x4b9b('0x18')][a37_0x4b9b('0x34')]({'id':_0x592f0e,'points':0x1});}},'getMainTankerId':function(){var _0x559ab9=0x0;var _0x520bd2=null;for(_0x559ab9=0x0;_0x559ab9<this[a37_0x4b9b('0x18')][a37_0x4b9b('0x35')];_0x559ab9++){if(_0x520bd2===null){_0x520bd2=this[a37_0x4b9b('0x18')][_0x559ab9];continue;}if(_0x520bd2[a37_0x4b9b('0x36')]<this[a37_0x4b9b('0x18')][_0x559ab9][a37_0x4b9b('0x36')]){_0x520bd2=this[a37_0x4b9b('0x18')][_0x559ab9];}}if(_0x520bd2){return _0x520bd2['id'];}else{return null;}},'getHatedPlayerId':function(_0x255ac3){var _0x15edc8,_0x301495,_0x1fd460=_['sortBy'](this['hatelist'],function(_0x446bd8){return _0x446bd8[a37_0x4b9b('0x37')];}),_0x2ba9c4=_[a37_0x4b9b('0x38')](this[a37_0x4b9b('0x2d')]);if(_0x255ac3&&_0x255ac3<=_0x2ba9c4){_0x15edc8=_0x2ba9c4-_0x255ac3;}else{if(_0x2ba9c4===0x1){_0x15edc8=_0x2ba9c4-0x1;}else{this[a37_0x4b9b('0x17')]++;if(this[a37_0x4b9b('0x17')]>_0x2ba9c4*1.3){this[a37_0x4b9b('0x17')]=0x0;_0x15edc8=_0x2ba9c4-0x1-Utils['random'](_0x2ba9c4-0x1);}else{return 0x0;}}}if(_0x1fd460&&_0x1fd460[_0x15edc8]){_0x301495=_0x1fd460[_0x15edc8]['id'];}return _0x301495;},'forgetPlayer':function(_0x30b90f,_0x33b7ff){this[a37_0x4b9b('0x2d')]=_[a37_0x4b9b('0x39')](this[a37_0x4b9b('0x2d')],function(_0x324696){return _0x324696['id']===_0x30b90f;});this[a37_0x4b9b('0x18')]=_[a37_0x4b9b('0x39')](this[a37_0x4b9b('0x18')],function(_0x274c45){return _0x274c45['id']===_0x30b90f;});if(this[a37_0x4b9b('0x2d')]['length']===0x0||this['tankerlist']===0x0){this[a37_0x4b9b('0x3a')](_0x33b7ff);}},'forgetEveryone':function(){this[a37_0x4b9b('0x2d')]=[];this[a37_0x4b9b('0x18')]=[];},'handleRespawn':function(){var _0x540c6a=this;if(this['area']&&this[a37_0x4b9b('0x3b')]instanceof MobArea){this[a37_0x4b9b('0x3b')]['respawnMob'](this,this[a37_0x4b9b('0x3c')]);}else{if(this[a37_0x4b9b('0x3b')]&&this[a37_0x4b9b('0x3b')]instanceof ChestArea){this['area'][a37_0x4b9b('0x3d')](this);}setTimeout(function(){if(_0x540c6a[a37_0x4b9b('0x3e')]){_0x540c6a[a37_0x4b9b('0x3e')]();}},this[a37_0x4b9b('0x3c')]);}},'onRespawn':function(_0x3f621d){this[a37_0x4b9b('0x3e')]=_0x3f621d;this[a37_0x4b9b('0x3f')]=![];},'resetPosition':function(){var _0x279d27=this['spawningX'],_0x28ffe9=this[a37_0x4b9b('0x40')];this[a37_0x4b9b('0x41')](_0x279d27,_0x28ffe9);},'returnToSpawningPosition':function(_0xd91797){dist=this[a37_0x4b9b('0x42')](this['x'],this['y']);var _0x3f169e=this,_0x28983c=_0xd91797||(dist+0x1)*this[a37_0x4b9b('0x1c')];_0x3f169e[a37_0x4b9b('0x2e')]();_0x3f169e[a37_0x4b9b('0x22')]=!![];_0x3f169e[a37_0x4b9b('0x43')]=null;_0x3f169e['go'](_0x3f169e['spawningX'],_0x3f169e['spawningY']);_0x3f169e['returnTimeout']=setTimeout(function(){_0x3f169e[a37_0x4b9b('0x2f')]();_0x3f169e[a37_0x4b9b('0x22')]=![];},_0x28983c);},'onMove':function(_0x5022a2){this['moveCallback']=_0x5022a2;},'move':function(_0x34d002,_0x3cd3ab){this[a37_0x4b9b('0x41')](_0x34d002,_0x3cd3ab);this[a37_0x4b9b('0x44')]=Utils[a37_0x4b9b('0x45')](this);if(this['moveCallback']){this[a37_0x4b9b('0x46')](this);}},'updateHitPoints':function(){if(this['data']['hp'])this['resetHitPoints'](this[a37_0x4b9b('0x23')]['hp']);else this[a37_0x4b9b('0x47')](this[a37_0x4b9b('0x23')][a37_0x4b9b('0x1f')]*this['level']);},'distanceToSpawningPoint':function(_0x5cf5c1,_0x3e89f8){var _0x52506a=this;return Utils['distanceTo'](_0x5cf5c1,_0x3e89f8,_0x52506a[a37_0x4b9b('0xb')],_0x52506a[a37_0x4b9b('0x40')]);},'setDrops':function(){this[a37_0x4b9b('0x48')]={};var _0x18408d=Math['ceil'](this[a37_0x4b9b('0xe')]/0xa)*0xa;for(var _0x108a92 in Items[a37_0x4b9b('0x9')]){var _0x4f4590=Items[a37_0x4b9b('0x9')][_0x108a92];if(!_0x4f4590)continue;if(_0x4f4590[a37_0x4b9b('0x49')]==a37_0x4b9b('0x4a')||_0x4f4590[a37_0x4b9b('0x49')]==a37_0x4b9b('0x4b')){switch(_0x18408d){case _0x4f4590[a37_0x4b9b('0x4c')]+0xa:this[a37_0x4b9b('0x48')][_0x108a92]=0xa;break;case _0x4f4590[a37_0x4b9b('0x4c')]:this['drops'][_0x108a92]=0x5;break;case _0x4f4590[a37_0x4b9b('0x4c')]-0xa:this[a37_0x4b9b('0x48')][_0x108a92]=0x2;break;}}if(_0x4f4590[a37_0x4b9b('0x49')]==a37_0x4b9b('0x4d')){switch(_0x18408d){case _0x4f4590[a37_0x4b9b('0x4c')]+0x14:this[a37_0x4b9b('0x48')][_0x108a92]=0x64;break;case _0x4f4590[a37_0x4b9b('0x4c')]+0xa:this[a37_0x4b9b('0x48')][_0x108a92]=0x32;break;case _0x4f4590[a37_0x4b9b('0x4c')]:this[a37_0x4b9b('0x48')][_0x108a92]=0x19;break;case _0x4f4590[a37_0x4b9b('0x4c')]-0xa:this[a37_0x4b9b('0x48')][_0x108a92]=0xa;break;}}}if(this[a37_0x4b9b('0xa')]==0x10){for(var _0x108a92 in this['drops']){var _0x4f4590=Items[a37_0x4b9b('0x9')][_0x108a92];if(_0x4f4590[a37_0x4b9b('0x49')]==a37_0x4b9b('0x4a')||_0x4f4590['typemod']==a37_0x4b9b('0x4b'))this[a37_0x4b9b('0x48')][_0x108a92]*=0x1e;else if(_0x4f4590['typemod']==a37_0x4b9b('0x4d'))this[a37_0x4b9b('0x48')][_0x108a92]*=0x0;}}},'Speech':function(_0xe4304c,_0x3dee16){if(this[a37_0x4b9b('0x23')][a37_0x4b9b('0x4e')]===0x0)return;if(!_0x3dee16)_0x3dee16=Utils[a37_0x4b9b('0x4f')](MobSpeech['Speech'][_0xe4304c][a37_0x4b9b('0x35')]-0x1);return new Messages[(a37_0x4b9b('0x50'))](this,_0xe4304c,_0x3dee16);},'CanSee':function(_0x4a619d){if(this[a37_0x4b9b('0x44')]==Types[a37_0x4b9b('0x51')][a37_0x4b9b('0x52')]&&_0x4a619d['x']>=this['x']&&_0x4a619d['isNear'](this,this[a37_0x4b9b('0x19')])){return!![];}if(this[a37_0x4b9b('0x44')]==Types[a37_0x4b9b('0x51')][a37_0x4b9b('0x53')]&&_0x4a619d['x']<=this['x']&&_0x4a619d[a37_0x4b9b('0x54')](this,this[a37_0x4b9b('0x19')])){return!![];}if(this[a37_0x4b9b('0x44')]==Types[a37_0x4b9b('0x51')]['UP']&&_0x4a619d['y']<=this['y']&&_0x4a619d['isNear'](this,this[a37_0x4b9b('0x19')])){return!![];}if(this[a37_0x4b9b('0x44')]==Types['Orientations'][a37_0x4b9b('0x55')]&&_0x4a619d['y']>=this['y']&&_0x4a619d[a37_0x4b9b('0x54')](this,this[a37_0x4b9b('0x19')])){return!![];}return![];},'getState':function(){var _0x577d19=this[a37_0x4b9b('0x56')](),_0x572b91=[];_0x572b91['push'](this[a37_0x4b9b('0x57')]);_0x572b91[a37_0x4b9b('0x34')](this[a37_0x4b9b('0x44')]);if(this[a37_0x4b9b('0x24')])_0x572b91[a37_0x4b9b('0x34')](this[a37_0x4b9b('0x24')]['id']);else _0x572b91['push'](0x0);_0x572b91['push'](0x0);_0x572b91[a37_0x4b9b('0x34')](this[a37_0x4b9b('0x25')]['isCashedUp']?0x1:0x0);_0x572b91['push'](this[a37_0x4b9b('0xe')]);_0x572b91['push'](this[a37_0x4b9b('0x58')]);return _0x577d19[a37_0x4b9b('0x59')](_0x572b91);}});module[a37_0x4b9b('0x6')]=Mob;