var a13_0x88d8=['max','makeEmptyEquipment','setEquipmentItem','itemExperience','itemNumber','getItemLevel','map','entities','pushToPlayer','ItemLevelUp','Equipment','_putEquipment','kind','itemKind','itemSkillLevel','itemDurabilityMax','assign','packets','./itemroom','./message','../shared/js/itemtypes','Class','extend','owner','maxNumber','rooms','itemDurability'];(function(_0x319523,_0x3cd838){var _0x34eb2e=function(_0x1d7451){while(--_0x1d7451){_0x319523['push'](_0x319523['shift']());}};_0x34eb2e(++_0x3cd838);}(a13_0x88d8,0x13b));var a13_0x68fd=function(_0xe0f88e,_0x674301){_0xe0f88e=_0xe0f88e-0x0;var _0x21aabb=a13_0x88d8[_0xe0f88e];return _0x21aabb;};var cls=require('./lib/class'),ItemRoom=require(a13_0x68fd('0x0')),Messages=require(a13_0x68fd('0x1')),ItemTypes=require(a13_0x68fd('0x2')),Types=require('../shared/js/gametypes');module['exports']=Equipment=cls[a13_0x68fd('0x3')][a13_0x68fd('0x4')]({'init':function(_0x1360ae,_0x42a4cc,_0x3f0381,_0x571857,_0x55c6a2,_0x56eb01,_0x555cf0,_0x160012,_0x395fe0,_0x2c3cf6){this[a13_0x68fd('0x5')]=_0x1360ae;this['number']=_0x42a4cc;this[a13_0x68fd('0x6')]=0x2;this['rooms']=[];for(var _0x44b775=0x0;_0x44b775<this['number'];_0x44b775++){this['rooms'][_0x3f0381[_0x44b775]]=new ItemRoom(_0x571857[_0x44b775],_0x55c6a2[_0x44b775],_0x56eb01[_0x44b775],_0x555cf0[_0x44b775],_0x160012[_0x44b775],_0x395fe0[_0x44b775],_0x2c3cf6[_0x44b775]);}},'degradeItem':function(_0x5662bc,_0x5f97e2){var _0x223970=this[a13_0x68fd('0x7')][_0x5662bc];if(!_0x223970)return;_0x223970[a13_0x68fd('0x8')]-=_0x5f97e2;_0x223970[a13_0x68fd('0x8')]=Math[a13_0x68fd('0x9')](0x0,_0x223970[a13_0x68fd('0x8')]);if(_0x223970[a13_0x68fd('0x8')]==0x0&&_0x223970['itemDurabilityMax']<=0x1e){this[a13_0x68fd('0xa')](_0x5662bc);return![];}else{databaseHandler[a13_0x68fd('0xb')](this[a13_0x68fd('0x5')],_0x5662bc,_0x223970);return!![];}},'addExperience':function(_0x2dfc49,_0xa8e5f0){var _0x29acaa=this[a13_0x68fd('0x7')][_0x2dfc49];if(!_0x29acaa)return;_0x29acaa[a13_0x68fd('0xc')]+=_0xa8e5f0;var _0x424eed=_0x29acaa[a13_0x68fd('0xd')];var _0x218df3=ItemTypes[a13_0x68fd('0xe')](_0x29acaa[a13_0x68fd('0xc')]);if(_0x424eed<_0x218df3){_0x29acaa[a13_0x68fd('0xd')]++;this[a13_0x68fd('0x5')][a13_0x68fd('0xf')][a13_0x68fd('0x10')][a13_0x68fd('0x11')](this['owner'],new Messages[(a13_0x68fd('0x12'))](_0x2dfc49,_0x29acaa));}databaseHandler['setEquipmentItem'](this[a13_0x68fd('0x5')],_0x2dfc49,_0x29acaa);this[a13_0x68fd('0x5')][a13_0x68fd('0xf')]['entities'][a13_0x68fd('0x11')](this[a13_0x68fd('0x5')],new Messages[(a13_0x68fd('0x13'))](_0x2dfc49,_0x29acaa));},'makeEmptyEquipment':function(_0x576e3f){this[a13_0x68fd('0x7')][_0x576e3f]=null;delete this[a13_0x68fd('0x7')][_0x576e3f];databaseHandler['emptyOutEquipmentItem'](this[a13_0x68fd('0x5')],_0x576e3f);this[a13_0x68fd('0x5')][a13_0x68fd('0xf')][a13_0x68fd('0x10')][a13_0x68fd('0x11')](this[a13_0x68fd('0x5')],new Messages[(a13_0x68fd('0x13'))](_0x576e3f,null));},'putEquipmentItem':function(_0x553164,_0x5ca314){if(_0x5ca314)return this[a13_0x68fd('0x14')](_0x553164,_0x5ca314[a13_0x68fd('0x15')]||_0x5ca314[a13_0x68fd('0x16')],_0x5ca314[a13_0x68fd('0xd')],_0x5ca314['itemSkillKind'],_0x5ca314[a13_0x68fd('0x17')],_0x5ca314['itemDurability'],_0x5ca314[a13_0x68fd('0x18')],_0x5ca314[a13_0x68fd('0xc')]);else{var _0x126eab=Object['assign']({},this['rooms'][_0x553164]);this[a13_0x68fd('0xa')](_0x553164);this[a13_0x68fd('0x5')][a13_0x68fd('0xf')][a13_0x68fd('0x10')][a13_0x68fd('0x11')](this[a13_0x68fd('0x5')],new Messages[(a13_0x68fd('0x13'))](_0x553164,null));return _0x126eab;}},'_putEquipment':function(_0xfa4c54,_0x2aa49e,_0x77cf3e,_0x509754,_0x38d505,_0x12c36b,_0x2371e0,_0x47b83f){log['info'](_0xfa4c54+','+_0x2aa49e+','+_0x77cf3e+','+_0x509754+','+_0x38d505+','+_0x47b83f);var _0x8aca05=Object[a13_0x68fd('0x19')]({},this[a13_0x68fd('0x7')][_0xfa4c54]);var _0x590179=new ItemRoom(_0x2aa49e,_0x77cf3e,_0x509754,_0x38d505,_0x12c36b,_0x2371e0,_0x47b83f);this[a13_0x68fd('0x7')][_0xfa4c54]=_0x590179;databaseHandler[a13_0x68fd('0xb')](this[a13_0x68fd('0x5')],_0xfa4c54,_0x590179);if(this['owner']['id']in this[a13_0x68fd('0x5')][a13_0x68fd('0xf')][a13_0x68fd('0x10')][a13_0x68fd('0x1a')])this[a13_0x68fd('0x5')][a13_0x68fd('0xf')][a13_0x68fd('0x10')][a13_0x68fd('0x11')](this[a13_0x68fd('0x5')],new Messages[(a13_0x68fd('0x13'))](_0xfa4c54,_0x590179));return _0x8aca05;},'toString':function(){var _0x43f57b=0x0;var _0x599f68=''+this['maxNumber'];for(_0x43f57b=0x0;_0x43f57b<this['maxNumber'];_0x43f57b++){_0x599f68+=',\x20'+this[a13_0x68fd('0x7')][_0x43f57b][a13_0x68fd('0x16')]+'\x20';_0x599f68+=this['rooms'][_0x43f57b][a13_0x68fd('0xd')]+'\x20';_0x599f68+=this[a13_0x68fd('0x7')][_0x43f57b]['itemSkillKind']+'\x20';_0x599f68+=this[a13_0x68fd('0x7')][_0x43f57b][a13_0x68fd('0x17')]+'\x20';_0x599f68+=this[a13_0x68fd('0x7')][_0x43f57b][a13_0x68fd('0x8')]+'\x20';_0x599f68+=this[a13_0x68fd('0x7')][_0x43f57b][a13_0x68fd('0x18')]+'\x20';_0x599f68+=this['rooms'][_0x43f57b][a13_0x68fd('0xc')]+'\x20';}return _0x599f68;}});