var a49_0x42f0=['length','slice','abs','push','futureX','isMoving','nextGridX','nextGridY','applyIgnoreList_','./lib/astar','exports','extend','width','height','ignored','blankGrid','initGrids_','grid','max','min'];(function(_0x548153,_0x12de6f){var _0x123b77=function(_0x63b469){while(--_0x63b469){_0x548153['push'](_0x548153['shift']());}};_0x123b77(++_0x12de6f);}(a49_0x42f0,0x121));var a49_0x1358=function(_0x44e784,_0x404b9c){_0x44e784=_0x44e784-0x0;var _0x377ea3=a49_0x42f0[_0x44e784];return _0x377ea3;};var astar=require(a49_0x1358('0x0'));module[a49_0x1358('0x1')]=Pathfinder=Class[a49_0x1358('0x2')]({'init':function(_0x3f676c,_0x1fd341){this[a49_0x1358('0x3')]=_0x3f676c;this[a49_0x1358('0x4')]=_0x1fd341;this['grid']=[];this[a49_0x1358('0x5')]=[];this[a49_0x1358('0x6')]=[];this[a49_0x1358('0x7')]();},'initGrids_':function(){for(var _0x17ef32=0x0;_0x17ef32<this[a49_0x1358('0x4')];_0x17ef32+=0x1){this['blankGrid'][_0x17ef32]=[];this[a49_0x1358('0x8')][_0x17ef32]=[];for(var _0x14b6a0=0x0;_0x14b6a0<this['width'];_0x14b6a0+=0x1){this['blankGrid'][_0x17ef32][_0x14b6a0]=0x0;this[a49_0x1358('0x8')][_0x17ef32][_0x14b6a0]=0x0;}}},'getShortGrid':function(_0x21d49f,_0xa31bad,_0x5f796a,_0x11343f,_0x34281a){var _0x5d26f3=[_0xa31bad['x'],_0xa31bad['y']];var _0x358c16=[_0x5f796a,_0x11343f];var _0x1dc000=Math[a49_0x1358('0x9')](Math[a49_0x1358('0xa')](_0x5d26f3[0x0],_0x358c16[0x0])-_0x34281a,0x0);var _0x262088=Math['min'](Math['max'](_0x5d26f3[0x0],_0x358c16[0x0])+_0x34281a,_0x21d49f[0x0][a49_0x1358('0xb')]);var _0x582e9e=Math[a49_0x1358('0x9')](Math[a49_0x1358('0xa')](_0x5d26f3[0x1],_0x358c16[0x1])-_0x34281a,0x0);var _0x326e73=Math[a49_0x1358('0xa')](Math[a49_0x1358('0x9')](_0x5d26f3[0x1],_0x358c16[0x1])+_0x34281a,_0x21d49f[a49_0x1358('0xb')]);var _0x19bf00=[_0x5d26f3[0x0]-_0x1dc000,_0x5d26f3[0x1]-_0x582e9e];var _0x1f8055=[_0x358c16[0x0]-_0x1dc000,_0x358c16[0x1]-_0x582e9e];var _0x4ac3c0=[];for(var _0x676e63=_0x582e9e;_0x676e63<_0x326e73;_0x676e63++){_0x4ac3c0['push'](_0x21d49f[_0x676e63][a49_0x1358('0xc')](_0x1dc000,_0x262088));}return{'crop':_0x4ac3c0,'minX':_0x1dc000,'minY':_0x582e9e,'substart':_0x19bf00,'subend':_0x1f8055};},'findNeighbourPath':function(_0x113e28,_0x5cfd55,_0x4ca6b2){var _0x1dd3cc=[_0x113e28['x'],_0x113e28['y']],_0x52a601=[_0x5cfd55,_0x4ca6b2];if(Math['abs'](_0x1dd3cc[0x0]-_0x52a601[0x0])==0x1&&Math['abs'](_0x1dd3cc[0x1]-_0x52a601[0x1])==0x0||Math[a49_0x1358('0xd')](_0x1dd3cc[0x1]-_0x52a601[0x1])==0x1&&Math['abs'](_0x1dd3cc[0x0]-_0x52a601[0x0])==0x0)return[[_0x1dd3cc[0x0],_0x1dd3cc[0x1]],[_0x52a601[0x0],_0x52a601[0x1]]];return null;},'findShortPath':function(_0x7cfee2,_0x3773b2,_0x19eae2,_0x591991,_0x44178e,_0x2e7f04,_0x4c808c,_0x17738d){var _0x1e4b23=[_0x3773b2['x'],_0x3773b2['y']],_0x61818=[_0x19eae2,_0x591991],_0x5aaee3;var _0x1e8e8b=AStar(_0x7cfee2,_0x4c808c,_0x17738d);if(_0x1e8e8b[a49_0x1358('0xb')]>0x0){var _0x5aaee3=[];var _0x1a16f2=_0x1e8e8b[a49_0x1358('0xb')];for(var _0xfffd7e=0x0;_0xfffd7e<_0x1a16f2;++_0xfffd7e){_0x5aaee3[_0xfffd7e]=[];_0x5aaee3[_0xfffd7e][0x0]=_0x1e8e8b[_0xfffd7e][0x0]+_0x44178e;_0x5aaee3[_0xfffd7e][0x1]=_0x1e8e8b[_0xfffd7e][0x1]+_0x2e7f04;}return _0x5aaee3;}return null;},'findPath':function(_0x170e78,_0xe92c26,_0x59f468,_0x36e5c7,_0x4898b3){var _0x1468ec=[_0xe92c26['x'],_0xe92c26['y']],_0x3afd9e=[_0x59f468,_0x36e5c7],_0xbbe194;this['applyIgnoreList_'](_0x170e78,!![]);if(_0x4898b3===!![]){_0xbbe194=AStar(_0x170e78,_0x1468ec,_0x3afd9e);}if(!_0xbbe194||_0xbbe194['length']===0x0&&_0x4898b3===!![]){_0xbbe194=this['findIncompletePath_'](_0x170e78,_0x1468ec,_0x3afd9e);}return _0xbbe194;},'findIncompletePath_':function(_0x3088ae,_0x561004,_0x28145c){var _0x826e05,_0x8d4eef,_0x4167e3,_0x52b76a=[];_0x826e05=AStar(this[a49_0x1358('0x6')],_0x561004,_0x28145c);for(var _0x4920f0=_0x826e05['length']-0x1;_0x4920f0>0x0;_0x4920f0-=0x1){_0x8d4eef=_0x826e05[_0x4920f0][0x0];_0x4167e3=_0x826e05[_0x4920f0][0x1];if(this[a49_0x1358('0x8')][_0x4167e3][_0x8d4eef]===0x0){_0x52b76a=AStar(_0x3088ae,_0x561004,[_0x8d4eef,_0x4167e3]);break;}}return _0x52b76a;},'ignoreEntity':function(_0x389fe1){if(_0x389fe1){this[a49_0x1358('0x5')][a49_0x1358('0xe')](_0x389fe1);}},'applyIgnoreList_':function(_0x173512,_0x3e162b){var _0x4b084c=this,_0x24996f,_0x59f16c,_0x5f2439;_['each'](this[a49_0x1358('0x5')],function(_0x4af317){var _0x24996f,_0x59f16c;if(_0x4af317 instanceof Player){_0x24996f=_0x4af317[a49_0x1358('0xf')];_0x59f16c=_0x4af317['futureY'];}else{_0x24996f=_0x4af317[a49_0x1358('0x10')]()?_0x4af317[a49_0x1358('0x11')]:_0x4af317['x'];_0x59f16c=_0x4af317[a49_0x1358('0x10')]()?_0x4af317[a49_0x1358('0x12')]:_0x4af317['y'];}if(_0x24996f>=0x0&&_0x59f16c>=0x0){_0x173512[_0x59f16c][_0x24996f]=_0x3e162b?0x0:0x1;}});},'clearIgnoreList':function(_0x4d4318){this[a49_0x1358('0x13')](_0x4d4318,![]);this[a49_0x1358('0x5')]=[];}});