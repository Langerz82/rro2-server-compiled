var a20_0x399e=['\x20is\x20already\x20attacked\x20by\x20','exports','./entity','./message','./housesdata','extend','house','map','data','Kinds','level','collision','attackers','hitPoints','isDead','removeFromPathingGrid','grid','getMapIndex','kind','count','push','manhattenDistance','keys','length','each','isAttackedBy','error'];(function(_0x4623ba,_0x24268c){var _0x610eeb=function(_0x3d942f){while(--_0x3d942f){_0x4623ba['push'](_0x4623ba['shift']());}};_0x610eeb(++_0x24268c);}(a20_0x399e,0x89));var a20_0x10b2=function(_0xb3622e,_0x5b65a4){_0xb3622e=_0xb3622e-0x0;var _0x20d112=a20_0x399e[_0xb3622e];return _0x20d112;};var _=require('underscore'),Entity=require(a20_0x10b2('0x0')),Messages=require(a20_0x10b2('0x1')),Utils=require('./utils'),HousesData=require(a20_0x10b2('0x2'));var House=Entity[a20_0x10b2('0x3')]({'init':function(_0x47c407,_0x289a8a,_0x4eff79,_0x25e924,_0x4c2e5d){this['_super'](_0x47c407,a20_0x10b2('0x4'),_0x289a8a,_0x4eff79,_0x25e924,_0x4c2e5d);this[a20_0x10b2('0x5')]=_0x4c2e5d;this['x']=Number(_0x4eff79);this['y']=Number(_0x25e924);this[a20_0x10b2('0x6')]=HousesData[a20_0x10b2('0x7')][this['kind']];this[a20_0x10b2('0x8')]=0x0;this[a20_0x10b2('0x9')]=this[a20_0x10b2('0x6')][a20_0x10b2('0x9')];this[a20_0x10b2('0xa')]={};},'setMaxHitPoints':function(_0x260088){this[a20_0x10b2('0xb')]=_0x260088;this['maxHitPoints']=_0x260088;},'destroy':function(){this[a20_0x10b2('0xc')]=!![];this[a20_0x10b2('0xd')](this['map'][a20_0x10b2('0xe')]);},'_getBaseState':function(){var _0x2015fc=this[a20_0x10b2('0xf')]();return[parseInt(this['id']),parseInt(this[a20_0x10b2('0x10')]),this['x'],this['y'],_0x2015fc,this[a20_0x10b2('0x11')]];},'setPathingGrid':function(_0x17b329){for(var _0x4fd3c9=this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x1];_0x4fd3c9<this['data']['collision'][0x3];++_0x4fd3c9){for(var _0x2d3758=this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x0];_0x2d3758<this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x2];++_0x2d3758){_0x17b329[this['y']+_0x4fd3c9][this['x']+_0x2d3758]=0x1;}}},'removeFromPathingGrid':function(_0x5e45a6){for(var _0x1d848a=this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x1];_0x1d848a<this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x3];++_0x1d848a){for(var _0x2f9d35=this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x0];_0x2f9d35<this['data'][a20_0x10b2('0x9')][0x2];++_0x2f9d35){_0x5e45a6[this['y']+_0x1d848a][this['x']+_0x2f9d35]=0x0;}}},'receiveDamage':function(_0x15e280,_0x48c24b){this[a20_0x10b2('0xb')]-=_0x15e280;},'health':function(_0x52d97b){return new Messages['Health'](this['id'],this['hitPoints'],_0x52d97b?_0x52d97b instanceof Mob?0x1:0x2:0x0,![]);},'isAdjacent':function(_0x55cd77){if(this['x']+this[a20_0x10b2('0x6')]['collision'][0x0]-0x1<=_0x55cd77['x']&&this['x']+this[a20_0x10b2('0x6')]['collision'][0x2]>=_0x55cd77['x']&&this['y']+this[a20_0x10b2('0x6')]['collision'][0x1]-0x1<=_0x55cd77['y']&&this['y']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x3]>=_0x55cd77['y']){return!![];}return![];},'isNear':function(_0x5bc64b,_0x35aa37){if(this['x']+this['data'][a20_0x10b2('0x9')][0x0]-_0x35aa37-0x1<=_0x5bc64b['x']&&this['x']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x2]+_0x35aa37>=_0x5bc64b['x']&&this['y']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x1]-_0x35aa37-0x1<=_0x5bc64b['y']&&this['y']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x3]+_0x35aa37>=_0x5bc64b['y']){return!![];}return![];},'getClosestSpot':function(_0x354cea,_0x718658){var _0x21383f=[];var _0x138e09;var _0x564370;_0x718658=_0x718658|0x0;for(var _0x20858e=this['y']+this['data']['collision'][0x1]-_0x718658-0x1;_0x20858e<this['y']+this[a20_0x10b2('0x6')]['collision'][0x3]+_0x718658;++_0x20858e){_0x564370=this['x']+this['data']['collision'][0x0]-_0x718658-0x1;_0x21383f['push']({'d':Utils['manhattenDistance']({'x':_0x564370,'y':_0x20858e},{'x':_0x354cea['x'],'y':_0x354cea['y']}),'x':_0x564370,'y':_0x20858e});_0x564370=this['x']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x2]+_0x718658;_0x21383f[a20_0x10b2('0x12')]({'d':Utils[a20_0x10b2('0x13')]({'x':_0x564370,'y':_0x20858e},{'x':_0x354cea['x'],'y':_0x354cea['y']}),'x':_0x564370,'y':_0x20858e});}for(var _0x564370=this['x']+this[a20_0x10b2('0x6')]['collision'][0x0]-_0x718658-0x1;_0x564370<this['x']+this['data'][a20_0x10b2('0x9')][0x2]+_0x718658;++_0x564370){_0x20858e=this['y']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x1]-_0x718658-0x1;_0x21383f['push']({'d':Utils[a20_0x10b2('0x13')]({'x':_0x564370,'y':_0x20858e},{'x':_0x354cea['x'],'y':_0x354cea['y']}),'x':_0x564370,'y':_0x20858e});_0x20858e=this['y']+this[a20_0x10b2('0x6')][a20_0x10b2('0x9')][0x3]+_0x718658;_0x21383f[a20_0x10b2('0x12')]({'d':Utils[a20_0x10b2('0x13')]({'x':_0x564370,'y':_0x20858e},{'x':_0x354cea['x'],'y':_0x354cea['y']}),'x':_0x564370,'y':_0x20858e});}_0x21383f['sort'](function(_0x1eb87d,_0x1a7df8){return _0x1a7df8['d']-_0x1eb87d['d'];});return _0x21383f;},'onDestroyed':function(_0x5e4820){destroyed_callback=_0x5e4820;},'destroyed':function(){this[a20_0x10b2('0xc')]=!![];if(destroyed_callback)destroyed_callback();},'destroy':function(){},'isAttackedBy':function(_0x128538){if(Object[a20_0x10b2('0x14')](this['attackers'])[a20_0x10b2('0x15')]==0x0){return![];}return _0x128538['id']in this['attackers'];},'isAttacked':function(){if(Object[a20_0x10b2('0x14')](this[a20_0x10b2('0xa')])['length']==0x0){return![];}return!![];},'forEachAttacker':function(_0x49828a){_[a20_0x10b2('0x16')](this[a20_0x10b2('0xa')],function(_0x302ee3){_0x49828a(_0x302ee3);});},'addAttacker':function(_0x589f84){if(!this[a20_0x10b2('0x17')](_0x589f84)){this['attackers'][_0x589f84['id']]=_0x589f84;}else{log[a20_0x10b2('0x18')](this['id']+a20_0x10b2('0x19')+_0x589f84['id']);}},'removeAttacker':function(_0x17e7d6){if(Object['keys'](this['attackers'])['length']==0x0){return;}if(this['isAttackedBy'](_0x17e7d6)){delete this[a20_0x10b2('0xa')][_0x17e7d6['id']];}},'removeAttackers':function(){this[a20_0x10b2('0xa')]={};}});module[a20_0x10b2('0x1a')]=House;